@page "/categories_page"
@layout MainLayout
<div class="container">
    

    <div class="card">
       
        <div class="card-header">
             <h3>CATEGORIES</h3>
            
        </div>
        <div class="card-body">
            <a class="btn btn-primary" href="add_category" style="text-decoration:none">
                <span class="oi oi-plus" aria-hidden="true"></span> ADD CATEGORY
            </a>
            <div class="row">
                @if (category == null)
                {

                }
                else
                {
                    @foreach (var item in category)
                    {
                        <div class="col mt-2">
                            <div class="card" style="width: 18rem;">
                                @*<img class="card-img-top" src="../Resources/Images/dotnet_bot.svg" >*@
                                <div class="card-body">
                                    <p class="card-text">Name: @item.Name.ToUpper()</p>
                                    <h5 class="card-title">Id: @item.Id</h5>
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</div>
@code {
    private List<Category> category = new();
    protected override async Task OnInitializedAsync()
    {
        HttpClient httpClient = new HttpClient();
        try
        {
            var response = await httpClient.GetAsync("https://farm-web-api.herokuapp.com/api/Categories/");
            if (response.IsSuccessStatusCode)
            {
                var results = await response.Content.ReadAsStringAsync();
                category = Newtonsoft.Json.JsonConvert.DeserializeObject<List<Category>>(results);
            }
        }
        catch (Exception)
        {

        }
    }
}
